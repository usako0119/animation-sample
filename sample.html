<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <meta property="og:title" content=""> -->
    <!-- <meta property="og:description" content=""> -->
    <!-- <meta property="og:url" content=""> -->
    <!-- <meta property="og:image" content=""> -->
    <title>4-13 ランダムに現れる（CSS×JS）</title>
    <link rel="stylesheet" href="reset.css">
    <style>
      [v-cloak] {
        display: none;
      }

      #app {
        padding: 100px;
      }

      /*========= レイアウトのためのCSS ===============*/

      .randomBox,.randomScroll{
        display:flex;
        flex-wrap: wrap;
        width: 90vw;
      }

      .box{
        width: 220px;
        padding: 20px;
        margin: 20px;
        background-color: #666;
        color: #fff;
        box-sizing:border-box;
      }
    </style>
  </head>
  <body>
    <div id="app" v-cloak>
      <p>ページに遷移すると、ランダムに現れる</p>
  
      <!--ぱたっ-->
      <transition-group appear
        name="staggered-fade"
        tag="ul"
        class="randomBox"
        @before-enter="beforeEnter"
        @enter="enter"
        @leave="leave"
      >
        <li class="box" v-for="(moveData,index) in moveDatas" :key="moveData" :data-index="randomIndex(moveData)">ランダムに表示　ふわっ</li>
      </transition-group>


      <br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓スクロール後にランダムに現れる<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓<br>↓
        

      <!--スクロールしてぱたっ-->
      <ul class="randomScroll">
          <li class="box">ランダムに表示　ふわっ</li>
          <li class="box">ランダムに表示　ふわっ</li>
          <li class="box">ランダムに表示　ふわっ</li>
          <li class="box">ランダムに表示　ふわっ</li>
          <li class="box">ランダムに表示　ふわっ</li>
      </ul>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.4/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script> -->
    <script>
      const ComponentA = { /* ... */ }

      const app = new Vue({
        el: '#app',
        components: {
          'component-a': ComponentA,
        },
        data: {
            moveDatas: ['1','2','3','4','5'],
            randoms: []
        },
        created(){
          /** 最小値と最大値 */
          let min = 0, max = this.moveDatas.length;
            
            /** 重複チェックしながら乱数作成 */
            for(i = min; i <= max; i++){
              while(true){
                var tmp = this.intRandom(min, max);
                if(!this.randoms.includes(tmp)){
                  this.randoms.push(tmp);
                  break;
                }
              }
            }
            console.log(this.randoms)
        },
        mounted(){
            
        },
        methods: {
          randomIndex(n) {          
            return this.randoms[n]
          },
          intRandom(min, max){
            /** min以上max以下の整数値の乱数を返す */
            return Math.floor( Math.random() * (max - min + 1)) + min;
          },
          beforeEnter(el) {
            el.style.opacity = 0
            el.style.transform = 'translateY(100px)'
          },
          enter(el, done) {
            gsap.to(el, {
              opacity: 1,
              y: 0,
              delay: el.dataset.index * 0.15,
              onComplete: done
            })
          },
          leave(el, done) {
            gsap.to(el, {
              opacity: 0,
              y: 100,
              delay: el.dataset.index * 0.15,
              onComplete: done
            })
          }
        }
      })
    </script>
  </body>
</html>